(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{15:function(t,e,s){"use strict";var i={props:{items:{type:Array,required:!1}}},n=s(0),r=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"grid grid-cols-4 gap-16"},[e("aside",{staticClass:"col-span-4 md:col-span-1"},[this._t("nav")],2),this._v(" "),e("section",{staticClass:"col-span-4 md:col-span-3"},[e("div",{staticClass:"space-y-16"},[this._t("segments")],2)])])}),[],!1,null,null,null);e.a=r.exports},154:function(t,e,s){"use strict";s.r(e);var i=s(34),n=s(1),r=s(6),a=s(7),o=s(8),l=s(9),c=s(10),u=s(2),m=s(11),d=s(12),h=s(4),f=s(5),v=s(3),p=s(15),_=s(16),b=s(13),y=s(19),g=s(30),x=s(35),C=s(14),k=s(17),w=s(28),j=s(36),T=s(20),$=s(22),B=s(23),q=s(24),P=s(25),S=s(21),O={metaInfo:function(){return{title:"Cronjobs - ".concat(this.site.domain)}},layout:v.a,components:{TopBar:i.default,Container:n.a,Content:r.a,Page:a.a,PageHeader:o.a,PageHeaderTitle:l.a,PageBody:c.a,Button:u.a,List:m.a,ListItem:d.a,StatusBubble:h.a,NotificationBadge:f.a,FormInput:b.a,SettingsLayout:p.a,SettingsSegment:_.a,Form:y.a,FormActions:C.a,Pagination:g.a,Tabs:j.default,Table:T.a,TableHead:$.a,TableHeader:B.a,TableRow:q.a,TableBody:P.a,TableData:S.a,EmptyImage:x.a},data:function(){return{sending:!1,form:{command:"php /home/".concat(this.$page.auth.user.user_name,"/").concat(this.site.domain,"/script.php"),interval:"minutely",frequency:"* * * * *"},breadcrumbs:[{title:this.$page.settings.name,to:"/"},{title:this.__("Sites"),to:this.route("sites.index")},{title:this.site.domain,to:this.route("sites.show",this.site.id)},{title:this.__("Cronjobs"),to:this.route("sites.cronjobs.index",this.site.id)}]}},mounted:function(){this.shouldBePolling&&this.startPollingInterval()},watch:{shouldBePolling:function(t){t?this.pollingInterval||this.startPollingInterval():this.clearPollingInterval()}},computed:{shouldBePolling:function(){return!!this.cronjobs.data.filter((function(t){return"busy"===t.status})).length},convertedFrequency:function(){return"minutely"===this.form.interval?this.form.frequency="* * * * *":"hourly"===this.form.interval?this.form.frequency="0 * * * *":"nightly"===this.form.interval?this.form.frequency="0 2 * * *":"weekly"===this.form.interval?this.form.frequency="0 0 * * 0":"monthly"===this.form.interval?this.form.frequency="0 0 1 * *":this.form.frequency}},props:{site:Object,cronjobs:Object},methods:{useNotification:k.a,startPollingInterval:function(){this.pollingInterval=setInterval(function(){this.poll()}.bind(this),3e3)},clearPollingInterval:function(){clearTimeout(this.pollingInterval),this.pollingInterval=null},poll:function(){this.$inertia.replace(this.route("sites.cronjobs.index",this.site.id),{only:["cronjobs"],preserveScroll:!0})},submit:function(){var t=this;this.sending=!0,this.$inertia.post(this.route("sites.cronjobs.store",this.site.id),this.form).then((function(){t.sending=!1,Object.keys(t.$page.errors).length||(t.form={command:"php /home/".concat(t.$page.auth.user.user_name,"/domain.com/script.php"),interval:"minutely",frequency:"* * * * *"})}))},confirmDelete:function(t){var e=this;Object(w.a)({title:this.__("Are you sure?"),message:this.__("Your cronjob will be deleted permanently, this action cannot be undone."),onConfirm:function(){return e.delete(t)}})},delete:function(t){this.$inertia.delete(this.route("sites.cronjobs.delete",[this.site.id,t.id]),{preserveScroll:!0})}},beforeDestroy:function(){this.clearPollingInterval()}},I=s(0),E=Object(I.a)(O,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Page",[s("TopBar",{attrs:{breadcrumbs:t.breadcrumbs}}),t._v(" "),s("Content",[s("Container",[s("PageHeader",{scopedSlots:t._u([{key:"start",fn:function(){return[s("PageHeaderTitle",[t._v("Cronjobs")])]},proxy:!0}])}),t._v(" "),s("PageBody",[s("SettingsLayout",{scopedSlots:t._u([{key:"nav",fn:function(){return[s("Tabs",{attrs:{site:t.site}})]},proxy:!0},{key:"segments",fn:function(){return[s("SettingsSegment",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.__("Create")))]},proxy:!0},{key:"subtitle",fn:function(){return[t._v("\n                                "+t._s(t.__("Add a new cronjob here to run your background tasks with."))+"\n                            ")]},proxy:!0},{key:"form",fn:function(){return[s("form",{staticClass:"space-y-4",on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[s("FormInput",{attrs:{label:t.__("Command"),errors:t.$page.errors.command},model:{value:t.form.command,callback:function(e){t.$set(t.form,"command",e)},expression:"form.command"}}),t._v(" "),s("div",[s("label",{staticClass:"inline-block text-small font-medium"},[t._v("\n                                            Frequency ("+t._s(t.convertedFrequency)+")\n                                        ")]),t._v(" "),s("div",[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.interval,expression:"form.interval"}],staticClass:"form-radio",attrs:{type:"radio",value:"minutely"},domProps:{checked:t._q(t.form.interval,"minutely")},on:{change:function(e){return t.$set(t.form,"interval","minutely")}}}),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("Every minute")])])]),t._v(" "),s("div",[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.interval,expression:"form.interval"}],staticClass:"form-radio",attrs:{type:"radio",name:"radio",value:"hourly"},domProps:{checked:t._q(t.form.interval,"hourly")},on:{change:function(e){return t.$set(t.form,"interval","hourly")}}}),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("Hourly")])])]),t._v(" "),s("div",[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.interval,expression:"form.interval"}],staticClass:"form-radio",attrs:{type:"radio",name:"radio",value:"nightly"},domProps:{checked:t._q(t.form.interval,"nightly")},on:{change:function(e){return t.$set(t.form,"interval","nightly")}}}),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("Nightly (2AM)")])])]),t._v(" "),s("div",[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.interval,expression:"form.interval"}],staticClass:"form-radio",attrs:{type:"radio",name:"radio",value:"weekly"},domProps:{checked:t._q(t.form.interval,"weekly")},on:{change:function(e){return t.$set(t.form,"interval","weekly")}}}),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("Weekly")])])]),t._v(" "),s("div",[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.interval,expression:"form.interval"}],staticClass:"form-radio",attrs:{type:"radio",name:"radio",value:"monthly"},domProps:{checked:t._q(t.form.interval,"monthly")},on:{change:function(e){return t.$set(t.form,"interval","monthly")}}}),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("Monthly")])])]),t._v(" "),s("div",[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.interval,expression:"form.interval"}],staticClass:"form-radio",attrs:{type:"radio",name:"radio",value:"custom"},domProps:{checked:t._q(t.form.interval,"custom")},on:{change:function(e){return t.$set(t.form,"interval","custom")}}}),t._v(" "),s("span",{staticClass:"ml-2"},[t._v("Custom")])])]),t._v(" "),s("FormInput",{directives:[{name:"show",rawName:"v-show",value:"custom"===t.form.interval,expression:"form.interval === 'custom'"}],attrs:{"helper-text":"min | hour | day/month | month | day/week",errors:t.$page.errors.frequency,label:t.__("Custom frequency")},model:{value:t.form.frequency,callback:function(e){t.$set(t.form,"frequency",e)},expression:"form.frequency"}})],1),t._v(" "),s("FormActions",[s("Button",[t._v(t._s(t.__("Save changes")))])],1)],1)]},proxy:!0}])}),t._v(" "),t.cronjobs.meta.total?t._e():s("EmptyImage"),t._v(" "),t.cronjobs.meta.total?s("SettingsSegment",{scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(t.__("Cronjobs")))]},proxy:!0},{key:"content",fn:function(){return[s("div",[s("Table",{attrs:{caption:"Cronjob list overview"}},[s("TableHead",[s("TableRow",[s("TableHeader"),t._v(" "),s("TableHeader",[t._v(t._s(t.__("Command")))]),t._v(" "),s("TableHeader",[t._v(t._s(t.__("Frequency")))]),t._v(" "),s("TableHeader")],1)],1),t._v(" "),s("TableBody",t._l(t.cronjobs.data,(function(e){return s("TableRow",{key:e.id},[s("TableData",[s("StatusBubble",{attrs:{variant:"busy"===e.status?"gray":"success"}})],1),t._v(" "),s("TableData",[t._v(t._s(e.command))]),t._v(" "),s("TableData",[t._v(t._s(e.frequency))]),t._v(" "),s("TableData",[s("Button",{attrs:{disabled:"busy"===e.status,variant:"danger",size:"sm"},on:{click:function(s){return t.confirmDelete(e)}}},[t._v("\n                                                        "+t._s(t.__("Delete"))+"\n                                                    ")])],1)],1)})),1)],1)],1),t._v(" "),s("pagination",{attrs:{links:t.cronjobs}})]},proxy:!0}],null,!1,723209988)}):t._e()]},proxy:!0}])})],1)],1)],1)],1)}),[],!1,null,null,null);e.default=E.exports},16:function(t,e,s){"use strict";var i=s(0),n=Object(i.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"px-8 pb-8 space-y-6 border rounded border-low-emphasis"},[e("header",{staticClass:"-mt-4"},[e("h2",{staticClass:"inline-flex px-4 -mx-4 font-medium bg-surface-1 text-title"},[this._t("title")],2),this._v(" "),e("p",{staticClass:"mt-1 text-small text-medium-emphasis"},[this._t("subtitle")],2)]),this._v(" "),e("div",{staticClass:"space-y-4"},[this._t("form"),this._v(" "),this._t("content")],2)])}),[],!1,null,null,null);e.a=n.exports},20:function(t,e,s){"use strict";var i={props:{caption:{type:String,required:!0}}},n=s(0),r=Object(n.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticClass:"w-full text-left table-auto text-small"},[e("caption",{staticClass:"sr-only"},[this._v(this._s(this.caption))]),this._v(" "),this._t("default")],2)}),[],!1,null,null,null);e.a=r.exports},21:function(t,e,s){"use strict";var i={props:{border:{type:Boolean,default:!0}}},n=s(0),r=Object(n.a)(i,(function(){var t=this.$createElement;return(this._self._c||t)("td",{staticClass:"py-2",class:{"border-t border-low-emphasis":this.border}},[this._t("default")],2)}),[],!1,null,null,null);e.a=r.exports},22:function(t,e,s){"use strict";var i=s(0),n=Object(i.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("thead",[this._t("default")],2)}),[],!1,null,null,null);e.a=n.exports},23:function(t,e,s){"use strict";var i=s(0),n=Object(i.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("th",{staticClass:"pb-2"},[this._t("default")],2)}),[],!1,null,null,null);e.a=n.exports},24:function(t,e,s){"use strict";var i=s(0),n=Object(i.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("tr",[this._t("default")],2)}),[],!1,null,null,null);e.a=n.exports},25:function(t,e,s){"use strict";var i=s(0),n=Object(i.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("tbody",[this._t("default")],2)}),[],!1,null,null,null);e.a=n.exports},28:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s(61);function n(t){var e=t.title,s=t.message,n=t.onConfirm;return i.a.dispatch("confirmDelete/open",{title:e,message:s,onConfirm:function(){n(),i.a.dispatch("confirmDelete/close")}})}},30:function(t,e,s){"use strict";var i={props:{links:Object},computed:{determineLinks:function(){return this.links.meta?this.links.meta:this.links}}},n=s(0),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.determineLinks.per_page<t.determineLinks.total?s("div",{staticClass:"mt-6 -mb-1 flex flex-wrap"},[t._l(t.determineLinks.links,(function(e,i){return[null===e.url?s("div",{key:i,staticClass:"mr-1 mb-1 px-4 py-3 text-sm border rounded text-gray-400",class:{"ml-auto":"Next"===e.label}},[t._v(t._s(e.label))]):s("inertia-link",{key:i,staticClass:"mr-1 mb-1 px-2 py-1 text-sm rounded",class:{"shadow text-high-emphasis bg-surface-1":e.active,"ml-auto":"Next"===e.label},attrs:{href:e.url}},[t._v(t._s(e.label))])]}))],2):t._e()}),[],!1,null,null,null);e.a=r.exports},34:function(t,e,s){"use strict";s.r(e);var i=s(38),n=s(39),r=s(40),a=s(41),o={components:{TopBar:i.a,Breadcrumbs:n.a,TabBar:r.a,TopBarTabBarContainer:a.a},props:{breadcrumbs:Array},data:function(){return{tabBars:[{title:this.__("Dashboard"),to:this.route("dashboard"),active:this.route().current("dashboard")},{title:this.__("Sites"),to:this.route("sites.index"),active:this.route().current("sites.*")},{title:"Servers",to:this.route("servers.index")}]}}},l=s(0),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("TopBar",{scopedSlots:t._u([{key:"breadcrumbs",fn:function(){return[s("Breadcrumbs",{attrs:{items:t.breadcrumbs}})]},proxy:!0},{key:"tab-bar",fn:function(){return[s("TopBarTabBarContainer",[s("TabBar",{attrs:{items:t.tabBars}})],1)]},proxy:!0}])})}),[],!1,null,null,null);e.default=c.exports},35:function(t,e,s){"use strict";var i=s(0),n=Object(i.a)({},(function(){var t=this.$createElement;return(this._self._c||t)("img",{staticClass:"w-32 md:w-48 m-auto",attrs:{src:"/images/empty.png"}})}),[],!1,null,null,null);e.a=n.exports},36:function(t,e,s){"use strict";s.r(e);var i={props:{site:Object},data:function(){return{items:[{title:this.__("General"),to:this.route("sites.show",this.site.id),active:this.route().current("sites.show")},{title:this.__("Apps"),to:this.route("sites.apps.index",this.site.id),active:this.route().current("sites.apps.index")},{title:this.__("Databases"),to:this.route("sites.databases.index",this.site.id),active:this.route().current("sites.databases.index")},{title:this.__("Cronjobs"),to:this.route("sites.cronjobs.index",this.site.id),active:this.route().current("sites.cronjobs.index")},{title:this.__("Redirects"),to:this.route("sites.redirects.index",this.site.id),active:this.route().current("sites.redirects.index")},{title:this.__("Certificates"),to:this.route("sites.certificates.index",this.site.id),active:this.route().current("sites.certificates.index")},this.site.dns_id?{title:this.__("DNS"),to:this.route("sites.dns.index",this.site.id),active:this.route().current("sites.dns.index")}:null,{title:this.__("Settings"),to:this.route("sites.settings.show",this.site.id),active:this.route().current("sites.settings.show")},{title:this.__("View site"),to:"http://".concat(this.site.domain),type:"a"}]}}},n=s(0),r=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"-ml-4 space-y-1"},t._l(t.items,(function(e){return e?s("li",[s(e.type&&"a"===e.type?"a":"inertia-link",{tag:"component",staticClass:"flex items-center h-10 px-4 font-medium text-medium-emphasis",class:{"rounded shadow text-primary bg-surface-3":e.active},attrs:{target:e.type&&"a"===e.type?"_blank":"_self",href:e.to}},[t._v(t._s(e.title)+" "+t._s(e.route))])],1):t._e()})),0)}),[],!1,null,null,null);e.default=r.exports}}]);