import m from"./TopBar.8157552e.js";import _ from"./Container.f87d9f62.js";import c from"./Content.e22a1fd6.js";import p from"./Page.3927bdbf.js";import f from"./PageHeader.a5f457a5.js";import u from"./PageHeaderTitle.3ed783af.js";import d from"./PageBody.dec1fae1.js";import h from"./Button.f17dffc9.js";import g from"./List.d5d221b1.js";import v from"./ListItem.ee1e88fb.js";import y from"./StatusBubble.4f1d8322.js";import b from"./NotificationBadge.b6fae3d5.js";import k from"./MainLayout.447e0981.js";import x from"./SettingsLayout.3305573b.js";import w from"./SettingsSegment.e8fdfb41.js";import A from"./FormInput.7debc7c5.js";import C from"./FormFileInput.e5838d58.js";import S from"./FormSelect.6e35ae7d.js";import $ from"./Form.2cdcadd9.js";import F from"./FormActions.83ccca91.js";import{u as P}from"./notification.c5e20df3.js";import E from"./Tabs.88273262.js";import{n as T}from"./plugin-vue2_normalizer.000ba15c.js";import"./TopBar.27b84f08.js";import"./Dropdown.d1060583.js";import"./DropdownList.02c48c2f.js";import"./DropdownListItem.ac31464c.js";import"./IconMoon.ade3e41b.js";import"./IconSun.8809e5d7.js";import"./IconSearch.27dac870.js";import"./IconButton.eadc8d3d.js";import"./Breadcrumbs.d39e2491.js";import"./BreadcrumbsItem.da3f8155.js";import"./TopBarTabBarContainer.3bdb2bb3.js";import"./TabBar.c1d45ed5.js";import"./TabBarItem.e9886f0a.js";import"./Confirm.888708f1.js";import"./Notification.d432029f.js";import"./IconDanger.2f6e115d.js";import"./IconWarning.ca92fb65.js";import"./IconSuccess.09b85716.js";import"./IconInfo.ad7662f9.js";import"./SearchPalette.282fdde5.js";import"./app.4a9d9ee7.js";import"./FormGroup.efd02a6a.js";import"./Label.9d0d3ee0.js";import"./ErrorText.b141a597.js";import"./HelperText.14a7ed0b.js";import"./IconClipboard.8551be1b.js";import"./IconKey.455a255f.js";const I={metaInfo(){return{title:`${this.__("Settings")}`}},layout:k,components:{TopBar:m,Container:_,Content:c,Page:p,PageHeader:f,PageHeaderTitle:u,PageBody:d,Button:h,List:g,ListItem:v,StatusBubble:y,NotificationBadge:b,FormInput:A,FormFileInput:C,FormSelect:S,SettingsLayout:x,SettingsSegment:w,Form:$,FormActions:F,Tabs:E},data(){return{sending:!1,form:{name:this.company_settings.name,email:this.company_settings.email,support_emails:this.company_settings.support_emails,support:this.company_settings.support,enable_api:this.company_settings.enable_api,api_token:this.company_settings.api_token,documentation:this.company_settings.documentation,allow_registration:this.company_settings.allow_registration,receive_email_on_server_creation:this.company_settings.receive_email_on_server_creation,receive_email_on_site_creation:this.company_settings.receive_email_on_site_creation,default_package:this.company_settings.default_package,isolate_per_site_per_user:this.company_settings.isolate_per_site_per_user,default_language:this.company_settings.default_language,logo:null,rotate_logs_after:this.company_settings.rotate_logs_after,trialEnabled:!1,trial:this.company_settings.trial,trial_package:this.company_settings.trial_package}}},mounted(){this.form.trialEnabled=!!this.company_settings.trial},props:{company_settings:Object,packages:{},languages:{}},methods:{useNotification:P,submit(){var l=new FormData;l.append("name",this.form.name||""),l.append("email",this.form.email||""),l.append("support_emails",this.form.support_emails||""),l.append("support",this.form.support||!1),l.append("enable_api",this.form.enable_api||!1),l.append("api_token",this.form.api_token||""),l.append("documentation",this.form.documentation||!1),l.append("allow_registration",this.form.allow_registration||!1),l.append("receive_email_on_server_creation",this.form.receive_email_on_server_creation||!1),l.append("receive_email_on_site_creation",this.form.receive_email_on_site_creation||!1),l.append("default_package",this.form.default_package||""),l.append("isolate_per_site_per_user",this.form.isolate_per_site_per_user||!1),l.append("default_language",this.form.default_language||"en"),l.append("logo",this.form.logo||""),l.append("rotate_logs_after",this.form.rotate_logs_after||""),l.append("trial",this.form.trial||""),l.append("trial_package",this.form.trial_package||""),l.append("_method","patch"),this.$inertia.post(this.route("admin.settings.update"),l,{preserveScroll:!0,onStart:()=>this.sending=!0,onFinish:()=>this.sending=!1,onSuccess:()=>{Object.keys(this.$page.props.errors).length===0&&(this.form.logo=null)}})},removeLogo(){this.$inertia.delete(this.route("admin.settings.remove-logo"),{preserveScroll:!0,onStart:()=>this.sending=!0,onFinish:()=>this.sending=!1})}}};var O=function(){var e=this,t=e._self._c;return t("Page",[t("TopBar"),t("Content",[t("Container",[t("PageHeader",{scopedSlots:e._u([{key:"start",fn:function(){return[t("PageHeaderTitle",[e._v(e._s(e.__("Settings")))])]},proxy:!0}])}),t("PageBody",[t("SettingsLayout",{scopedSlots:e._u([{key:"nav",fn:function(){return[t("Tabs")]},proxy:!0},{key:"segments",fn:function(){return[t("SettingsSegment",{scopedSlots:e._u([{key:"title",fn:function(){return[e._v(e._s(e.__("Overview")))]},proxy:!0},{key:"subtitle",fn:function(){return[e._v(" "+e._s(e.__("Change all the system settings here. All changes are in effect immediately."))+" ")]},proxy:!0},{key:"form",fn:function(){return[t("form",{staticClass:"space-y-4",on:{submit:function(a){return a.preventDefault(),e.submit.apply(null,arguments)}}},[t("FormInput",{attrs:{label:e.__("Company name"),errors:e.$page.props.errors.name},model:{value:e.form.name,callback:function(a){e.$set(e.form,"name",a)},expression:"form.name"}}),t("FormInput",{attrs:{label:e.__("E-mail address"),errors:e.$page.props.errors.email},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}}),t("FormFileInput",{attrs:{accept:"image/*",label:e.__("Logo"),type:"file",errors:e.$page.props.errors.logo},model:{value:e.form.logo,callback:function(a){e.$set(e.form,"logo",a)},expression:"form.logo"}}),e.company_settings.has_logo?t("Button",{staticClass:"ml-2 px-4 py-1 bg-red-500 hover:bg-red-700 rounded-sm text-xs font-medium text-white",attrs:{variant:"danger",type:"button"},on:{click:e.removeLogo}},[e._v(" Remove logo ")]):e._e(),t("FormInput",{attrs:{"helper-text":e.__("Separate by comma to allow more email addresses"),label:e.__("Support email addresses"),errors:e.$page.props.errors.support_emails},model:{value:e.form.support_emails,callback:function(a){e.$set(e.form,"support_emails",a)},expression:"form.support_emails"}}),t("FormSelect",{attrs:{"helper-text":e.__("Select the default package a user should get when you create or they register"),label:e.__("Select default package")},model:{value:e.form.default_package,callback:function(a){e.$set(e.form,"default_package",a)},expression:"form.default_package"}},e._l(e.packages,function(a,r){return t("option",{domProps:{value:r,textContent:e._s(a)}})}),0),t("FormSelect",{attrs:{"helper-text":e.__("Select the default package a user should get when you create or they register"),label:e.__("Select default language")},model:{value:e.form.default_language,callback:function(a){e.$set(e.form,"default_language",a)},expression:"form.default_language"}},e._l(e.languages,function(a){return t("option",{domProps:{value:a,textContent:e._s(a)}})}),0),t("FormSelect",{attrs:{"helper-text":e.__("This will rotate any logs older than selected, this helps cleanup your database"),label:e.__("Rotate logs after")},model:{value:e.form.rotate_logs_after,callback:function(a){e.$set(e.form,"rotate_logs_after",a)},expression:"form.rotate_logs_after"}},[t("option",{attrs:{value:""}},[e._v("Don't rotate logs")]),t("option",{attrs:{value:"weeks-1"}},[e._v("Older than 1 week")]),t("option",{attrs:{value:"months-1"}},[e._v("Older than 1 month")]),t("option",{attrs:{value:"months-3"}},[e._v("Older than 3 months")]),t("option",{attrs:{value:"months-6"}},[e._v("Older than 6 months")]),t("option",{attrs:{value:"years-1"}},[e._v("Older than 1 year")]),t("option",{attrs:{value:"years-2"}},[e._v("Older than 2 years")]),t("option",{attrs:{value:"years-3"}},[e._v("Older than 3 years")]),t("option",{attrs:{value:"years-4"}},[e._v("Older than 4 years")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.trialEnabled,expression:"form.trialEnabled"}],staticClass:"form-checkbox",attrs:{id:"trial",type:"checkbox"},domProps:{checked:Array.isArray(e.form.trialEnabled)?e._i(e.form.trialEnabled,null)>-1:e.form.trialEnabled},on:{change:function(a){var r=e.form.trialEnabled,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"trialEnabled",r.concat([i])):o>-1&&e.$set(e.form,"trialEnabled",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"trialEnabled",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"trial"}},[e._v(e._s(e.__("Enable trial")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will allow you to have users with trials."))+" ")])]),e.form.trialEnabled?t("FormInput",{attrs:{type:"number",label:e.__("Trial days"),errors:e.$page.props.errors.trial},model:{value:e.form.trial,callback:function(a){e.$set(e.form,"trial",a)},expression:"form.trial"}}):e._e(),e.form.trialEnabled?t("FormSelect",{attrs:{errors:e.$page.props.errors.trial_package,"helper-text":e.__("Select the trial package a user should get when they get their trial"),label:e.__("Select trial package")},model:{value:e.form.trial_package,callback:function(a){e.$set(e.form,"trial_package",a)},expression:"form.trial_package"}},e._l(e.packages,function(a,r){return t("option",{domProps:{value:r,textContent:e._s(a)}})}),0):e._e(),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.support,expression:"form.support"}],staticClass:"form-checkbox",attrs:{id:"support",type:"checkbox"},domProps:{checked:Array.isArray(e.form.support)?e._i(e.form.support,null)>-1:e.form.support},on:{change:function(a){var r=e.form.support,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"support",r.concat([i])):o>-1&&e.$set(e.form,"support",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"support",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"support"}},[e._v(e._s(e.__("Enable support platform")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will allow your customers to make support requests to you."))+" ")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.documentation,expression:"form.documentation"}],staticClass:"form-checkbox",attrs:{id:"documentation",type:"checkbox"},domProps:{checked:Array.isArray(e.form.documentation)?e._i(e.form.documentation,null)>-1:e.form.documentation},on:{change:function(a){var r=e.form.documentation,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"documentation",r.concat([i])):o>-1&&e.$set(e.form,"documentation",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"documentation",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"documentation"}},[e._v(e._s(e.__("Enable documentation platform")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will allow you to create articles for your users to look at."))+" ")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.allow_registration,expression:"form.allow_registration"}],staticClass:"form-checkbox",attrs:{id:"allow_registration",type:"checkbox"},domProps:{checked:Array.isArray(e.form.allow_registration)?e._i(e.form.allow_registration,null)>-1:e.form.allow_registration},on:{change:function(a){var r=e.form.allow_registration,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"allow_registration",r.concat([i])):o>-1&&e.$set(e.form,"allow_registration",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"allow_registration",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"allow_registration"}},[e._v(e._s(e.__("Allow customer registration")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will allow public users to register on your platform."))+" ")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.receive_email_on_server_creation,expression:"form.receive_email_on_server_creation"}],staticClass:"form-checkbox",attrs:{id:"receive_email_on_server_creation",type:"checkbox"},domProps:{checked:Array.isArray(e.form.receive_email_on_server_creation)?e._i(e.form.receive_email_on_server_creation,null)>-1:e.form.receive_email_on_server_creation},on:{change:function(a){var r=e.form.receive_email_on_server_creation,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"receive_email_on_server_creation",r.concat([i])):o>-1&&e.$set(e.form,"receive_email_on_server_creation",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"receive_email_on_server_creation",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"receive_email_on_server_creation"}},[e._v(e._s(e.__("Receive email when customers create server")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will send an email to all admins notifying them about a new server installation."))+" ")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.receive_email_on_site_creation,expression:"form.receive_email_on_site_creation"}],staticClass:"form-checkbox",attrs:{id:"receive_email_on_site_creation",type:"checkbox"},domProps:{checked:Array.isArray(e.form.receive_email_on_site_creation)?e._i(e.form.receive_email_on_site_creation,null)>-1:e.form.receive_email_on_site_creation},on:{change:function(a){var r=e.form.receive_email_on_site_creation,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"receive_email_on_site_creation",r.concat([i])):o>-1&&e.$set(e.form,"receive_email_on_site_creation",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"receive_email_on_site_creation",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"receive_email_on_site_creation"}},[e._v(e._s(e.__("Receive email when customers create site")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will send an email to all admins notifying them about a new site installation."))+" ")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.enable_api,expression:"form.enable_api"}],staticClass:"form-checkbox",attrs:{id:"enable_api",type:"checkbox"},domProps:{checked:Array.isArray(e.form.enable_api)?e._i(e.form.enable_api,null)>-1:e.form.enable_api},on:{change:function(a){var r=e.form.enable_api,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"enable_api",r.concat([i])):o>-1&&e.$set(e.form,"enable_api",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"enable_api",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"enable_api"}},[e._v(e._s(e.__("Enable API")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will allow you to interact with your system via the API."))+" "),t("a",{staticClass:"text-primary",attrs:{href:"https://docs.ploi-core.io/core-api/introduction",target:"_blank"}},[e._v(e._s(e.__("More information")))])])]),e.form.enable_api?t("FormInput",{attrs:{"allow-random-string":"",label:e.__("API token"),errors:e.$page.props.errors.api_token},model:{value:e.form.api_token,callback:function(a){e.$set(e.form,"api_token",a)},expression:"form.api_token"}}):e._e(),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.isolate_per_site_per_user,expression:"form.isolate_per_site_per_user"}],staticClass:"form-checkbox",attrs:{id:"isolate_per_site_per_user",type:"checkbox"},domProps:{checked:Array.isArray(e.form.isolate_per_site_per_user)?e._i(e.form.isolate_per_site_per_user,null)>-1:e.form.isolate_per_site_per_user},on:{change:function(a){var r=e.form.isolate_per_site_per_user,s=a.target,n=!!s.checked;if(Array.isArray(r)){var i=null,o=e._i(r,i);s.checked?o<0&&e.$set(e.form,"isolate_per_site_per_user",r.concat([i])):o>-1&&e.$set(e.form,"isolate_per_site_per_user",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.form,"isolate_per_site_per_user",n)}}}),t("label",{staticClass:"ml-2 text-sm",attrs:{for:"isolate_per_site_per_user"}},[e._v(e._s(e.__("Enable site isolation per site & user")))]),t("p",{staticClass:"text-small mt-1 text-medium-emphasis"},[e._v(" "+e._s(e.__("This will make sure each site created by one user is always isolated from another."))+" ")])]),t("FormActions",[t("Button",[e._v(e._s(e.__("Save")))])],1)],1)]},proxy:!0}])})]},proxy:!0}])})],1)],1)],1)],1)},N=[],B=T(I,O,N,!1,null,null,null,null);const Ie=B.exports;export{Ie as default};
